#ENV VARS
export PROJECT_ID=kubernetes-demo-486609
export ZONE=europe-west1-b
export CLUSTER_NAME=hands-on


#useful
kubectl -n hands-on rollout history deployment/hello
kubectl -n hands-on delete deployment hello
kubectl delete -f 10-hello.yaml



# Nach 1
kubectl get pods -n hands-on -o wide
kubectl get nodes --show-labels | grep gke-nodepool
kubectl -n hands-on port-forward --address 0.0.0.0 svc/hello 8080:80
curl http://127.0.0.1:8080


# Nach 2
kubectl get pods -n hands-on -o wide
kubectl delete deploy -n hands-on demo-v1 demo-v2 --ignore-not-found
kubectl get pods -n hands-on

#Nach 3
kubectl delete deploy -n hands-on demo-v3 --ignore-not-found
kubectl apply -f manifests/variants/40-deploy-v4-nodepool-placement.yaml
kubectl get pods -n hands-on -o wide

#Nach 4
kubectl get --raw "/apis/metrics.k8s.io/v1beta1/nodes" | head

kubectl apply -f manifests/variants/50-hpa.yaml
kubectl get hpa -n hands-on

#zu5
kubectl run -n hands-on loadgen \
  --image=busybox:1.36 \
  --restart=Never -- \
  sh -c 'while true; do wget -q -O- http://demo.hands-on.svc.cluster.local >/dev/null; done'


